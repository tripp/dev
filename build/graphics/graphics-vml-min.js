YUI.add("graphics-vml",function(d){function c(e){this._initialize(e);this._draw();}c.prototype={type:"shape",_initialize:function(e){if(!e.graphic){e.graphic=new d.Graphic();}this._setProps(e);},width:0,height:0,_setProps:function(e){this.width=e.width&&e.width>=0?e.width:this.width;this.height=e.height&&e.height>=0?e.height:this.height;this.border=e.border||this.border;this.graphics=e.graphic||this.graphics;this.canvas=this.graphics;this.parentNode=this.graphics.node;this.fill=e.fill||this.fill;this.type=e.shape||this.type;this.props=e.props||this.props;},_draw:function(){var f,g=0,e=this.width||0,h=this.height||0;this.graphics.setSize(e,h);if(this.node){this.node.style.visible="hidden";}else{if(!this.node){this.node=this.graphics._createGraphicNode(this.graphics._getNodeShapeType(this.type));this.graphics.node.appendChild(this.node);}}if(this.type==="wedge"){f=this.graphics._getWedgePath(this.props);if(this.fill){f+=" x";}if(this.border){f+=" e";}this.node.path=f;}this._addBorder();if(this.border&&this.border.weight&&this.border.weight>0){g=this.border.weight;e-=g;h-=g;}this.node.style.width=Math.max(e,0)+"px";this.node.style.height=Math.max(h,0)+"px";this._addFill();return this;},_addBorder:function(){if(this.border&&this.border.weight&&this.border.weight>0){var e=this.border.alpha,f=this.borderWeight;e=d.Lang.isNumber(e)?e:1;f=d.Lang.isNumber(f)?f:1;this.node.strokecolor=this.border.color||"#000000";this.node.strokeweight=f;if(e<1){if(!this._strokeNode){this._strokeNode=this.graphics._createGraphicNode("stroke");this.node.appendChild(this._strokeNode);}this._strokeNode.opacity=e;}else{if(this._strokeNode){this._strokeNode.opacity=e;}}this.node.stroked=true;}else{this.node.stroked=false;}},_addFill:function(){var e;this.node.filled=true;if(this.fill.type==="linear"||this.fill.type==="radial"){this.graphics.beginGradientFill(this.fill);this.node.appendChild(this.graphics._getFill());}else{if(this.fill.type==="bitmap"){this.graphics.beginBitmapFill(this.fill);this.node.appendChild(this.graphics._getFill());}else{if(!this.fill.color){this.node.filled=false;}else{if(this.fillnode){this.graphics._removeChildren(this.fillnode);}e=this.fill.alpha;e=d.Lang.isNumber(e)?e:1;this.fill.alpha=e;this.fillnode=this.graphics._createGraphicNode("fill");this.fillnode.type="solid";this.fillnode.color=this.fill.color;this.fillnode.opacity=e;this.node.appendChild(this.fillnode);}}}},addClass:function(f){var e=this.node;if(e){d.one(e).addClass(f);}},toggleVisible:function(f){var e=f?"visible":"hidden";if(this.node){d.one(this.node).setStyle("visibility",e);}},setPosition:function(e,g){var f=d.one(this.parentNode);f.setStyle("position","absolute");f.setStyle("left",e);f.setStyle("top",g);},update:function(e){this._setProps(e);this._draw();return this;}};d.Shape=c;var a=function(e){this.initializer.apply(this,arguments);};a.prototype={initializer:function(f){f=f||{};var e=f.width||0,g=f.height||0;this.node=this._createGraphics();this.setSize(e,g);this._initProps();},beginBitmapFill:function(e){var f={};f.src=e.bitmap.src;f.type="tile";this._fillProps=f;if(!isNaN(e.tx)||!isNaN(e.ty)||!isNaN(e.width)||!isNaN(e.height)){this._gradientBox={tx:e.tx,ty:e.ty,width:e.width,height:e.height};}else{this._gradientBox=null;}},beginFill:function(e,f){if(e){if(d.Lang.isNumber(f)){this._fillProps={type:"solid",opacity:f};}this._fillColor=e;this._fill=1;}return this;},beginGradientFill:function(g){var m=g.type,e=g.colors,f=g.alphas||[],k=g.ratios||[],p={colors:e,ratios:k},l=f.length,j=0,h,n,o=g.rotation||0;for(;j<l;++j){h=f[j];h=d.Lang.isNumber(h)?h:1;n=j>0?j+1:"";f[j]=Math.round(h*100)+"%";p["opacity"+n]=h;}if(m==="linear"){if(g){}if(o>0&&o<=90){o=450-o;}else{if(o<=270){o=270-o;}else{if(o<=360){o=630-o;}else{o=270;}}}p.type="gradientunscaled";p.angle=o;}else{if(m==="radial"){p.alignshape=false;p.type="gradientradial";p.focus="100%";p.focusposition="50%,50%";}}p.ratios=k||[];if(!isNaN(g.tx)||!isNaN(g.ty)||!isNaN(g.width)||!isNaN(g.height)){this._gradientBox={tx:g.tx,ty:g.ty,width:g.width,height:g.height};}else{this._gradientBox=null;}this._fillProps=p;},clear:function(){this._path="";this._removeChildren(this.node);},destroy:function(){this._removeChildren(this.node);this.node.parentNode.removeChild(this.node);},_removeChildren:function(e){if(e.hasChildNodes()){var f;while(e.firstChild){f=e.firstChild;this._removeChildren(f);e.removeChild(f);}}},toggleVisible:function(e){this._toggleVisible(this.node,e);},_toggleVisible:function(j,k){var h=d.one(j).get("children"),f=k?"visible":"hidden",g=0,e;if(h){e=h.length;for(;g<e;++g){this._toggleVisible(h[g],k);}}j.style.visibility=f;},curveTo:function(g,f,i,h,e,j){this._shape="shape";this._path+=" c "+Math.round(g)+", "+Math.round(f)+", "+Math.round(i)+", "+Math.round(h)+", "+e+", "+j;this._trackSize(e,j);},quadraticCurveTo:function(g,f,e,h){this._path+=" qb "+g+", "+f+", "+e+", "+h;},drawCircle:function(e,g,f){this._width=this._height=f*2;this._x=e-f;this._y=g-f;this._shape="oval";this._draw();},drawEllipse:function(e,i,f,g){this._width=f;this._height=g;this._x=e;this._y=i;this._shape="oval";this._draw();},drawRect:function(e,i,f,g){this._x=e;this._y=i;this._width=f;this._height=g;this.moveTo(e,i);this.lineTo(e+f,i);this.lineTo(e+f,i+g);this.lineTo(e,i+g);this.lineTo(e,i);this._draw();},drawRoundRect:function(e,k,f,i,g,j){this._x=e;this._y=k;this._width=f;this._height=i;this.moveTo(e,k+j);this.lineTo(e,k+i-j);this.quadraticCurveTo(e,k+i,e+g,k+i);this.lineTo(e+f-g,k+i);this.quadraticCurveTo(e+f,k+i,e+f,k+i-j);this.lineTo(e+f,k+j);this.quadraticCurveTo(e+f,k,e+f-g,k);this.lineTo(e+g,k);this.quadraticCurveTo(e,k,e,k+j);this._draw();},drawWedge:function(g,j,i,h,f,e){this._drawingComplete=false;this._width=f;this._height=f;e=e||f;this._path+=this._getWedgePath({x:g,y:j,startAngle:i,arc:h,radius:f,yRadius:e});this._width=f*2;this._height=this._width;this._shape="shape";this._draw();},_getWedgePath:function(h){var g=h.x,l=h.y,j=h.startAngle,i=h.arc,f=h.radius,e=h.yRadius||f,k;if(Math.abs(i)>360){i=360;
}j*=-65535;i*=65536;k=" m "+g+" "+l+" ae "+g+" "+l+" "+f+" "+e+" "+j+" "+i;return k;},end:function(){if(this._shape){this._draw();}this._initProps();},lineGradientStyle:function(){},lineStyle:function(o,j,h,f,n,p,g,e,k){var l,m;this._stroke=1;this._strokeWeight=o*0.7;this._strokeColor=j;this._strokeOpacity=d.Lang.isNumber(h)?h:1;if(f){m=f.length;for(l=0;l<m;++l){f[l]=Math.round(f[l]/o);}this._dashstyle=f.toString();}},lineTo:function(k,j,g){var f=arguments,h,e;if(typeof k==="string"||typeof k==="number"){f=[[k,j]];}e=f.length;this._shape="shape";this._path+=" l ";for(h=0;h<e;++h){this._path+=" "+Math.round(f[h][0])+", "+Math.round(f[h][1]);this._trackSize.apply(this,f[h]);}},moveTo:function(e,f){this._path+=" m "+Math.round(e)+", "+Math.round(f);},setSize:function(e,f){e=Math.round(e);f=Math.round(f);this.node.style.width=e+"px";this.node.style.height=f+"px";this.node.coordSize=e+" "+f;this._canvasWidth=e;this._canvasHeight=f;},setPosition:function(e,f){e=Math.round(e);f=Math.round(f);this.node.style.left=e+"px";this.node.style.top=f+"px";},render:function(e){var f=Math.max(e.offsetWidth||0,this._canvasWidth),g=Math.max(e.offsetHeight||0,this._canvasHeight);e=e||d.config.doc.body;e.appendChild(this.node);this.setSize(f,g);this._initProps();return this;},_shape:null,_trackSize:function(e,f){if(e>this._width){this._width=e;}if(f>this._height){this._height=f;}},_initProps:function(){this._fillColor=null;this._strokeColor=null;this._strokeOpacity=null;this._strokeWeight=0;this._fillProps=null;this._path="";this._width=0;this._height=0;this._x=0;this._y=0;this._fill=null;this._stroke=0;this._stroked=false;this._dashstyle=null;},_clearPath:function(){this._shape=null;this._path="";this._width=0;this._height=0;this._x=0;this._y=0;},_draw:function(){var g=this._createGraphicNode(this._shape),e=Math.round(this._width),i=Math.round(this._height),j,f=this._fillProps;this.setSize(e,i);if(this._path){if(this._fill||this._fillProps){this._path+=" x";}if(this._stroke){this._path+=" e";}g.path=this._path;g.coordSize=e+", "+i;}else{g.style.display="block";g.style.position="absolute";g.style.left=this._x+"px";g.style.top=this._y+"px";}if(this._fill){g.fillColor=this._fillColor;}else{g.filled=false;}if(this._stroke&&this._strokeWeight>0){g.strokeColor=this._strokeColor;g.strokeWeight=this._strokeWeight;if(d.Lang.isNumber(this._strokeOpacity)&&this._strokeOpacity<1){j=this._createGraphicNode("stroke");g.appendChild(j);j.opacity=this._strokeOpacity;}if(this._dashstyle){if(!j){j=this._createGraphicNode("stroke");g.appendChild(j);}j.dashstyle=this._dashstyle;}}else{g.stroked=false;}g.style.width=e+"px";g.style.height=i+"px";if(f){g.filled=true;g.appendChild(this._getFill());}this.node.appendChild(g);this._clearPath();},_getFill:function(){var t=this._createGraphicNode("fill"),r=this._width,m=this._height,n=this._fillProps,f,s,k=0,e,q="",o,l,p=Math.sqrt(Math.pow(r,2)+Math.pow(m,2)),j=50,g=50;if(this._gradientBox){j=Math.round((this._gradientBox.width/2-((this._x-this._gradientBox.tx)*p/r))/(r*r/p)*100);g=Math.round((this._gradientBox.height/2-((this._y-this._gradientBox.ty)*p/m))/(m*m/p)*100);n.focussize=(this._gradientBox.width/r)/10+" "+(this._gradientBox.height/m)/10;}if(n.colors){e=n.colors.concat();l=n.ratios.concat();o=e.length;for(;k<o;++k){s=l[k]||k/(o-1);s=Math.round(100*s)+"%";q+=", "+s+" "+e[k];}if(parseInt(s,10)<100){q+=", 100% "+e[o-1];}}for(f in n){if(n.hasOwnProperty(f)){t.setAttribute(f,n[f]);}}t.colors=q.substr(2);if(n.type==="gradientradial"){t.focusposition=j+"%,"+g+"%";}return t;},_createGraphics:function(){var e=this._createGraphicNode("group");e.style.display="block";e.style.position="absolute";return e;},_createGraphicNode:function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsft.com:vml" class="vml'+e+'"/>');},_getNodeShapeType:function(f){var e="shape";if(this._typeConversionHash.hasOwnProperty(f)){e=this._typeConversionHash[f];}return e;},_typeConversionHash:{circle:"oval",ellipse:"oval",rect:"rect"},getShape:function(e){e.graphic=this;return new d.Shape(e);},addChild:function(e){this.node.appendChild(e);}};var b=document.createStyleSheet();b.addRule(".vmlgroup","behavior:url(#default#VML)",b.rules.length);b.addRule(".vmlgroup","display:inline-block",b.rules.length);b.addRule(".vmlgroup","zoom:1",b.rules.length);b.addRule(".vmlshape","behavior:url(#default#VML)",b.rules.length);b.addRule(".vmlshape","display:inline-block",b.rules.length);b.addRule(".vmloval","behavior:url(#default#VML)",b.rules.length);b.addRule(".vmloval","display:inline-block",b.rules.length);b.addRule(".vmlrect","behavior:url(#default#VML)",b.rules.length);b.addRule(".vmlrect","display:block",b.rules.length);b.addRule(".vmlfill","behavior:url(#default#VML)",b.rules.length);b.addRule(".vmlstroke","behavior:url(#default#VML)",b.rules.length);d.Graphic=a;},"@VERSION@",{skinnable:false,requires:["graphics"]});