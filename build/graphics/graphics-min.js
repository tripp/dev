YUI.add("graphics",function(b){var c=b.UA.chrome,a,d=document.createElement("canvas");if(document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")){a="svg";}else{if(d&&d.getContext&&d.getContext("2d")){a="canvas";}else{a="vml";}}var g=function(l){this.initializer.apply(this,arguments);};g.prototype={autoSize:true,initializer:function(m){m=m||{};var l=m.width||0,n=m.height||0;if(m.node){this.node=m.node;this._styleGroup(this.node);}else{this.node=this._createGraphics();this.setSize(l,n);}this._initProps();},beginBitmapFill:function(l){var m={};m.src=l.bitmap.src;m.type="tile";this._fillProps=m;if(!isNaN(l.tx)||!isNaN(l.ty)||!isNaN(l.width)||!isNaN(l.height)){this._gradientBox={tx:l.tx,ty:l.ty,width:l.width,height:l.height};}else{this._gradientBox=null;}},beginFill:function(l,m){if(l){this._fillAlpha=b.Lang.isNumber(m)?m:1;this._fillColor=l;this._fillType="solid";this._fill=1;}return this;},beginGradientFill:function(m){var l=m.alphas||[];if(!this._defs){this._defs=this._createGraphicNode("defs");this.node.appendChild(this._defs);}this._fillAlphas=l;this._fillColors=m.colors;this._fillType=m.type||"linear";this._fillRatios=m.ratios||[];this._fillRotation=m.rotation||0;this._fillWidth=m.width||null;this._fillHeight=m.height||null;this._fillX=!isNaN(m.tx)?m.tx:NaN;this._fillY=!isNaN(m.ty)?m.ty:NaN;this._gradientId="lg"+Math.round(100000*Math.random());return this;},destroy:function(){this._removeChildren(this.node);if(this.node&&this.node.parentNode){this.node.parentNode.removeChild(this.node);}},_removeChildren:function(l){if(l.hasChildNodes()){var m;while(l.firstChild){m=l.firstChild;this._removeChildren(m);l.removeChild(m);}}},toggleVisible:function(l){this._toggleVisible(this.node,l);},_toggleVisible:function(p,q){var o=b.Selector.query(">/*",p),m=q?"visible":"hidden",n=0,l;if(o){l=o.length;for(;n<l;++n){this._toggleVisible(o[n],q);}}p.style.visibility=m;},clear:function(){if(this._graphicsList){while(this._graphicsList.length>0){this.node.removeChild(this._graphicsList.shift());}}this.path="";},curveTo:function(q,o,v,u,t,s){this._shapeType="path";var m,r,p,l,n,w;if(this._pathType!=="C"){this._pathType="C";r=["C"];this._pathArray.push(r);}else{r=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!r){r=[];this._pathArray.push(r);}}m=this._pathArray.length-1;this._pathArray[m]=this._pathArray[m].concat([Math.round(q),Math.round(o),Math.round(v),Math.round(u),t,s]);p=Math.max(t,Math.max(q,v));n=Math.max(s,Math.max(o,u));l=Math.min(t,Math.min(q,v));w=Math.min(s,Math.min(o,u));this._trackSize(p,n);this._trackSize(l,w);},quadraticCurveTo:function(q,p,t,s){var m,r,o,l,n,u;if(this._pathType!=="Q"){this._pathType="Q";r=["Q"];this._pathArray.push(r);}else{r=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!r){r=[];this._pathArray.push(r);}}m=this._pathArray.length-1;this._pathArray[m]=this._pathArray[m].concat([Math.round(q),Math.round(p),Math.round(t),Math.round(s)]);o=Math.max(t,q);n=Math.max(s,p);l=Math.min(t,q);u=Math.min(s,p);this._trackSize(o,n);this._trackSize(l,u);},drawCircle:function(l,n,m){this._shape={x:l-m,y:n-m,w:m*2,h:m*2};this._attributes={cx:l,cy:n,r:m};this._width=this._height=m*2;this._x=l-m;this._y=n-m;this._shapeType="circle";this._draw();},drawEllipse:function(l,o,m,n){this._shape={x:l,y:o,w:m,h:n};this._width=m;this._height=n;this._x=l;this._y=o;this._shapeType="ellipse";this._draw();},drawRect:function(l,o,m,n){this._shape={x:l,y:o,w:m,h:n};this._x=l;this._y=o;this._width=m;this._height=n;this.moveTo(l,o);this.lineTo(l+m,o);this.lineTo(l+m,o+n);this.lineTo(l,o+n);this.lineTo(l,o);this._draw();},drawRoundRect:function(l,q,m,o,n,p){this._shape={x:l,y:q,w:m,h:o};this._x=l;this._y=q;this._width=m;this._height=o;this.moveTo(l,q+p);this.lineTo(l,q+o-p);this.quadraticCurveTo(l,q+o,l+n,q+o);this.lineTo(l+m-n,q+o);this.quadraticCurveTo(l+m,q+o,l+m,q+o-p);this.lineTo(l+m,q+p);this.quadraticCurveTo(l+m,q,l+m-n,q);this.lineTo(l+n,q);this.quadraticCurveTo(l,q,l,q+p);this._draw();},drawWedge:function(n,q,p,o,m,l){this._drawingComplete=false;this.path=this._getWedgePath({x:n,y:q,startAngle:p,arc:o,radius:m,yRadius:l});this._width=m*2;this._height=this._width;this._shapeType="path";this._draw();},end:function(){if(this._shapeType){this._draw();}this._initProps();},lineGradientStyle:function(){},lineStyle:function(o,n,s,q,p,r,l,m){this._stroke=1;this._strokeWeight=o;if(n){this._strokeColor=n;}this._strokeAlpha=b.Lang.isNumber(s)?s:1;},lineTo:function(q,p,n){var m=arguments,o,l,s,r;if(typeof q==="string"||typeof q==="number"){m=[[q,p]];}l=m.length;this._shapeType="path";if(this._pathType!=="L"){this._pathType="L";r=["L"];this._pathArray.push(r);}else{r=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!r){r=[];this._pathArray.push(r);}}s=this._pathArray.length-1;for(o=0;o<l;++o){this._pathArray[s]=this._pathArray[s].concat([m[o][0],m[o][1]]);this._trackSize.apply(this,m[o]);}},moveTo:function(l,o){var n,m;if(this._pathType!="M"){this._pathType="M";m=["M"];this._pathArray.push(m);}else{m=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!m){m=[];this._pathArray.push(m);}}n=this._pathArray.length-1;this._pathArray[n]=this._pathArray[n].concat([l,o]);this._trackSize(l,o);},_getWedgePath:function(G){var u=G.x,s=G.y,B=G.startAngle,r=G.arc,n=G.radius,o=G.yRadius||n,A,w,q,F,p,v,t,E,D,m,l,C=0,z=" M"+u+", "+s;if(Math.abs(r)>360){r=360;}A=Math.ceil(Math.abs(r)/45);w=r/A;q=-(w/180)*Math.PI;F=(B/180)*Math.PI;if(A>0){v=u+Math.cos(B/180*Math.PI)*n;t=s+Math.sin(B/180*Math.PI)*o;z+=" L"+Math.round(v)+", "+Math.round(t);z+=" Q";for(;C<A;++C){F+=q;p=F-(q/2);E=u+Math.cos(F)*n;D=s+Math.sin(F)*o;m=u+Math.cos(p)*(n/Math.cos(q/2));l=s+Math.sin(p)*(o/Math.cos(q/2));z+=Math.round(m)+" "+Math.round(l)+" "+Math.round(E)+" "+Math.round(D)+" ";}z+=" L"+u+", "+s;}return z;},setSize:function(l,m){if(this.autoSize){if(l>this.node.getAttribute("width")){this.node.setAttribute("width",l);}if(m>this.node.getAttribute("height")){this.node.setAttribute("height",m);}}},_trackSize:function(l,m){if(l>this._right){this._right=l;
}if(l<this._left){this._left=l;}if(m<this._top){this._top=m;}if(m>this._bottom){this._bottom=m;}this._width=this._right-this._left;this._height=this._bottom-this._top;this.node.style.left=this._left+"px";this.node.style.top=this._top+"px";this.setSize(this._width,this._height);},setPosition:function(l,m){this.node.setAttribute("x",l);this.node.setAttribute("y",m);},render:function(l){var m=l.get("width")||l.get("offsetWidth"),n=l.get("height")||l.get("offsetHeight");l=l||b.config.doc.body;l.appendChild(this.node);this.setSize(m,n);this._initProps();return this;},_initProps:function(){this._shape=null;this._fillColor=null;this._strokeColor=null;this._strokeWeight=0;this._fillProps=null;this._fillAlphas=null;this._fillColors=null;this._fillType=null;this._fillRatios=null;this._fillRotation=null;this._fillWidth=null;this._fillHeight=null;this._fillX=NaN;this._fillY=NaN;this.path="";this._width=0;this._height=0;this._left=0;this._top=0;this._bottom=0;this._right=0;this._x=0;this._y=0;this._fill=null;this._stroke=0;this._stroked=false;this._pathType=null;this._attributes={};this._pathArray=[];},_clearPath:function(){this._shape=null;this._shapeType=null;this.path="";this._width=0;this._height=0;this._x=0;this._y=0;this._pathType=null;this._attributes={};},_draw:function(){var s=this._createGraphicNode(this._shapeType),p,u,m=this._pathArray,o,l,r,n,q,t;if(this._shapeType=="path"){this.path="";while(m&&m.length>0){o=m.shift();r=o.length;l=o[0];this.path+=" "+l+(o[1]-this._left);switch(l){case"L":case"M":for(p=2;p<r;++p){n=(p%2===0)?this._top:this._left;n=o[p]-n;this.path+=", "+n;}break;case"Q":case"C":for(p=2;p<r;++p){n=(p%2===0)?this._top:this._left;q=o[p];q-=n;this.path+=" "+q;}break;}}if(this._fill){this.path+="z";}s.setAttribute("d",this.path);}else{for(p in this._attributes){if(this._attributes.hasOwnProperty(p)){s.setAttribute(p,this._attributes[p]);}}}s.setAttribute("stroke-width",this._strokeWeight);if(this._strokeColor){s.setAttribute("stroke",this._strokeColor);s.setAttribute("stroke-opacity",this._strokeAlpha);}if(!this._fillType||this._fillType==="solid"){if(this._fillColor){s.setAttribute("fill",this._fillColor);s.setAttribute("fill-opacity",this._fillAlpha);}else{s.setAttribute("fill","none");}}else{if(this._fillType==="linear"){u=this._getFill();u.setAttribute("id",this._gradientId);this._defs.appendChild(u);s.setAttribute("fill","url(#"+this._gradientId+")");}}this.node.appendChild(s);this._clearPath();},_getFill:function(){var l=this._fillType,m;switch(l){case"linear":m=this._getLinearGradient("fill");break;case"radial":break;case"bitmap":break;}return m;},_getLinearGradient:function(s){var H=this._createGraphicNode("linearGradient"),q="_"+s,y=this[q+"Colors"],B=this[q+"Ratios"],v=this[q+"Alphas"],z=this._fillWidth||(this._shape.w),K=this._fillHeight||(this._shape.h),D=this[q+"Rotation"],I,F,G,x,t,A,E,L,J,p,n,o=z/2,m=K/2,u,C;u=Math.PI/180;C=parseFloat(parseFloat(Math.tan(D*u)).toFixed(8));if(Math.abs(C)*z/2>=K/2){if(D<180){p=0;n=K;}else{p=K;n=0;}L=o-((m-p)/C);J=o-((m-n)/C);}else{if(D>90&&D<270){L=z;J=0;}else{L=0;J=z;}p=((C*(o-L))-m)*-1;n=((C*(o-J))-m)*-1;}H.setAttribute("gradientTransform","rotate("+D+")");H.setAttribute("width",z);H.setAttribute("height",K);H.setAttribute("gradientUnits","userSpaceOnUse");F=y.length;A=0;for(I=0;I<F;++I){t=v[I];G=y[I];x=B[I]||I/(F-1);x=Math.round(x*100)+"%";t=b.Lang.isNumber(t)?t:"1";A=(I+1)/F;E=this._createGraphicNode("stop");E.setAttribute("offset",x);E.setAttribute("stop-color",G);E.setAttribute("stop-opacity",t);H.appendChild(E);}return H;},_createGraphics:function(){var l=this._createGraphicNode("svg");this._styleGroup(l);return l;},_styleGroup:function(l){l.style.position="absolute";l.style.top="0px";l.style.left="0px";l.setAttribute("pointer-events","none");},_createGraphicNode:function(n,l){var o=document.createElementNS("http://www.w3.org/2000/svg","svg:"+n),m=l||"none";if(n!=="defs"&&n!=="stop"&&n!=="linearGradient"){o.setAttribute("pointer-events",m);}if(n!="svg"){if(!this._graphicsList){this._graphicsList=[];}this._graphicsList.push(o);}return o;},getShape:function(l){l.graphic=this;return new b.Shape(l);}};b.Graphic=g;function k(){this.initializer.apply(this,arguments);}k.prototype={setSize:function(l,m){if(this.autoSize){if(l>this.node.getAttribute("width")){this.node.style.width=l+"px";this._canvas.style.width=l+"px";this._canvas.width=l;this.node.setAttribute("width",l);}if(m>this.node.getAttribute("height")){this.node.style.height=m+"px";this._canvas.style.height=m+"px";this._canvas.height=m;this.node.setAttribute("height",m);}}},_updatePosition:function(l,m){if(l<=this._left){this._left=l;}else{if(l>=this._right){this._right=l;}}if(m<=this._top){this._top=m;}else{if(m>=this._bottom){this._bottom=m;}}this._width=this._right-this._left;this._height=this._bottom-this._top;},initializer:function(l){this._dummy=this._createDummy();this._canvas=this._createGraphic();this._context=this._canvas.getContext("2d");this._initProps();},_methods:null,_properties:null,_updateDrawingQueue:function(l){if(!this._methods){this._methods=[];}this._methods.push(l);},beginBitmapFill:function(l){var m=this._context,o=l.bitmap,n=l.repeat||"repeat";this._fillWidth=l.width||null;this._fillHeight=l.height||null;this._fillX=!isNaN(l.tx)?l.tx:NaN;this._fillY=!isNaN(l.ty)?l.ty:NaN;this._fillType="bitmap";this._bitmapFill=m.createPattern(o,n);return this;},beginFill:function(l,n){var m=this._context;this._updateDrawingQueue(["beginPath"]);if(l){if(n){l=this._2RGBA(l,n);}else{l=this._2RGB(l);}this._fillColor=l;this._fillType="solid";}return this;},beginGradientFill:function(p){var o,r,q=0,n=p.colors,m=p.alphas||[],l=n.length;this._fillAlphas=m;this._fillColors=n;this._fillType=p.type||"linear";this._fillRatios=p.ratios||[];this._fillRotation=p.rotation||0;this._fillWidth=p.width||null;this._fillHeight=p.height||null;this._fillX=!isNaN(p.tx)?p.tx:NaN;this._fillY=!isNaN(p.ty)?p.ty:NaN;for(;q<l;++q){r=m[q];o=n[q];if(r){o=this._2RGBA(o,r);}else{o=this._2RGB(o);}n[q]=o;
}this._updateDrawingQueue(["beginPath"]);return this;},lineStyle:function(s,p,o,r,t,n,l,q){p=p||"#000000";var m=this._context;if(this._stroke){this._updateDrawingQueue(["stroke"]);}this._lineWidth=s;if(s){this._stroke=1;}else{this._stroke=0;}if(p){this._strokeStyle=p;if(o){this._strokeStyle=this._2RGBA(this._strokeStyle,o);}}if(!this._fill){this._updateDrawingQueue(["beginPath"]);}if(n==="butt"){n="none";}if(m.lineCap){}this._drawingComplete=false;return this;},lineTo:function(q,p,n){var m=arguments,o,l;if(typeof q==="string"||typeof q==="number"){m=[[q,p]];}for(o=0,l=m.length;o<l;++o){this._updateDrawingQueue(["lineTo",m[o][0],m[o][1]]);this._lineToMethods[this._lineToMethods.length]=this._methods[this._methods.length-1];this._updateShapeProps.apply(this,m[o]);this._updatePosition(m[o][0],m[o][1]);}this._drawingComplete=false;return this;},moveTo:function(l,m){this._updateDrawingQueue(["moveTo",l,m]);this._updateShapeProps(l,m);this._drawingComplete=false;return this;},clear:function(){this._initProps();this._canvas.width=this._canvas.width;this._canvas.height=this._canvas.height;return this;},curveTo:function(n,m,p,o,l,q){this._updateDrawingQueue(["bezierCurveTo",n,m,p,o,l,q]);this._drawingComplete=false;this._updateShapeProps(l,q);return this;},quadraticCurveTo:function(n,m,l,o){this._updateDrawingQueue(["quadraticCurveTo",n,m,l,o]);this._drawingComplete=false;this._updateShapeProps(l,o);return this;},drawCircle:function(m,q,l){var p=this._context,o=0,n=2*Math.PI;this._shape={x:m-l,y:q-l,w:l*2,h:l*2};this._drawingComplete=false;this._updateDrawingQueue(["beginPath"]);this._updateDrawingQueue(["arc",m,q,l,o,n,false]);this._draw();return this;},drawEllipse:function(A,v,B,G){this._shape={x:A,y:v,w:B,h:G};if(this._stroke&&this._context.lineWidth>0){B-=this._context.lineWidth*2;G-=this._context.lineWidth*2;A+=this._context.lineWidth;v+=this._context.lineWidth;}var n=this._context,D=8,s=-(45/180)*Math.PI,I=0,r,p=B/2,q=G/2,E=0,u=A+p,t=v+q,C,z,H,F,o,m;this._drawingComplete=false;this._trackPos(A,v);this._trackSize(A+B,v+G);this._updateDrawingQueue(["beginPath"]);C=u+Math.cos(0)*p;z=t+Math.sin(0)*q;this._updateDrawingQueue(["moveTo",C,z]);for(;E<D;E++){I+=s;r=I-(s/2);H=u+Math.cos(I)*p;F=t+Math.sin(I)*q;o=u+Math.cos(r)*(p/Math.cos(s/2));m=t+Math.sin(r)*(q/Math.cos(s/2));this._updateDrawingQueue(["quadraticCurveTo",o,m,H,F]);}this._draw();return this;},drawRect:function(l,p,n,o){var m=this._context;this._shape={x:l,y:p,w:n,h:o};this._drawingComplete=false;this._updateDrawingQueue(["beginPath"]);this._updateDrawingQueue(["moveTo",l,p]);this._updateDrawingQueue(["lineTo",l+n,p]);this._updateDrawingQueue(["lineTo",l+n,p+o]);this._updateDrawingQueue(["lineTo",l,p+o]);this._updateDrawingQueue(["lineTo",l,p]);this._trackPos(l,p);this._trackSize(n,o);this._draw();return this;},drawRoundRect:function(l,r,n,p,o,q){this._shape={x:l,y:r,w:n,h:p};var m=this._context;this._drawingComplete=false;this._updateDrawingQueue(["beginPath"]);this._updateDrawingQueue(["moveTo",l,r+q]);this._updateDrawingQueue(["lineTo",l,r+p-q]);this._updateDrawingQueue(["quadraticCurveTo",l,r+p,l+o,r+p]);this._updateDrawingQueue(["lineTo",l+n-o,r+p]);this._updateDrawingQueue(["quadraticCurveTo",l+n,r+p,l+n,r+p-q]);this._updateDrawingQueue(["lineTo",l+n,r+q]);this._updateDrawingQueue(["quadraticCurveTo",l+n,r,l+n-o,r]);this._updateDrawingQueue(["lineTo",l+o,r]);this._updateDrawingQueue(["quadraticCurveTo",l,r,l,r+q]);this._trackPos(l,r);this._trackSize(n,p);this._draw();return this;},drawWedge:function(o){var v=o.x,t=o.y,B=o.startAngle,s=o.arc,n=o.radius,p=o.yRadius,A,z,r,F,q,w,u,E,D,m,l,C=0;this._drawingComplete=false;this._updateRenderQueue(["moveTo",v,t]);p=p||n;if(Math.abs(s)>360){s=360;}A=Math.ceil(Math.abs(s)/45);z=s/A;r=-(z/180)*Math.PI;F=-(B/180)*Math.PI;if(A>0){w=v+Math.cos(B/180*Math.PI)*n;u=t+Math.sin(-B/180*Math.PI)*p;this.lineTo(w,u);for(;C<A;++C){F+=r;q=F-(r/2);E=v+Math.cos(F)*n;D=t+Math.sin(F)*p;m=v+Math.cos(q)*(n/Math.cos(r/2));l=t+Math.sin(q)*(p/Math.cos(r/2));this._updateRenderQueue(["quadraticCurveTo",m,l,E,D]);}this._updateRenderQueue(["lineTo",v,t]);}this._trackPos(v,t);this._trackSize(n,n);this._draw();},end:function(){this._draw();this._initProps();return this;},_initProps:function(){var l=this._context;l.fillStyle="rgba(0, 0, 0, 1)";l.lineWidth=6;l.lineJoin="miter";l.miterLimit=3;this._strokeStyle="rgba(0, 0, 0, 1)";this._methods=[];this._width=0;this._height=0;this._left=0;this._top=0;this._right=0;this._bottom=0;this._x=0;this._y=0;this._fillType=null;this._stroke=null;this._bitmapFill=null;this._drawingComplete=false;this._lineToMethods=[];},_getFill:function(){var l=this._fillType,m;switch(l){case"linear":m=this._getLinearGradient("fill");break;case"radial":m=this._getRadialGradient("fill");break;case"bitmap":m=this._bitmapFill;break;case"solid":m=this._fillColor;break;}return m;},_getLinearGradient:function(s){var q="_"+s,A=this[q+"Colors"],E=this[q+"Ratios"],B=!isNaN(this._fillX)?this._fillX:this._shape.x,z=!isNaN(this._fillY)?this._fillY:this._shape.y,C=this._fillWidth||(this._shape.w),M=this._fillHeight||(this._shape.h),H=this._context,G=this[q+"Rotation"],K,I,J,v,D,u,N,L,p,n,o=B+C/2,m=z+M/2,t=Math.PI/180,F=parseFloat(parseFloat(Math.tan(G*t)).toFixed(8));if(Math.abs(F)*C/2>=M/2){if(G<180){p=z;n=z+M;}else{p=z+M;n=z;}N=o-((m-p)/F);L=o-((m-n)/F);}else{if(G>90&&G<270){N=B+C;L=B;}else{N=B;L=B+C;}p=((F*(o-N))-m)*-1;n=((F*(o-L))-m)*-1;}u=H.createLinearGradient(N,p,L,n);I=A.length;D=0;for(K=0;K<I;++K){J=A[K];v=E[K]||K/(I-1);u.addColorStop(v,J);D=(K+1)/I;}return u;},_getRadialGradient:function(v){var n="_"+v,m=this[n+"Colors"],s=this[n+"Ratios"],r,p,C=this._fillWidth||this._shape.w,t=this._fillHeight||this._shape.h,A=!isNaN(this._fillX)?this._fillX:this._shape.x,z=!isNaN(this._fillY)?this._fillY:this._shape.y,q,u,o,B,D=this._context;A+=C/2;z+=t/2;B=D.createRadialGradient(A,z,1,A,z,C/2);p=m.length;o=0;for(r=0;r<p;++r){q=m[r];u=s[r]||r/(p-1);B.addColorStop(u,q);}return B;},_draw:function(){if(this._drawingComplete||!this._shape){return;
}var t,p,m=this._context,u,n=this._methods,o=0,s=this._lineToMethods,v=s.length,l,r,q=n?n.length:0;t=this._width+this._lineWidth;p=this._height+this._lineWidth;this.node.style.left=this._left+"px";this.node.style.top=this._top+"px";this.node.style.width=this._width+"px";this.node.style.height=this._height+"px";this._canvas.style.width=t+"px";this._canvas.style.height=p+"px";this._canvas.width=t;this._canvas.height=p;if(!q||q<1){return;}for(;o<v;++o){r=s[o];r[1]=r[1]-this._left;r[2]=r[2]-this._top;}for(o=0;o<q;++o){r=n[o];if(r&&r.length>0){l=r.shift();if(l){m[l].apply(m,r);}}}if(this._fillType){u=this._getFill();if(u){m.fillStyle=u;}m.closePath();}if(this._fillType){m.fill();}if(this._stroke){if(this._lineWidth){m.lineWidth=this._lineWidth;}m.strokeStyle=this._strokeStyle;m.stroke();}this._drawingComplete=true;},_drawingComplete:false,_reHex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,_2RGBA:function(m,l){l=(l!==undefined)?l:1;if(this._reHex.exec(m)){m="rgba("+[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)].join(",")+","+l+")";}return m;},_createDummy:function(){var l=b.config.doc.createElement("div");l.style.height=0;l.style.width=0;l.style.overflow="hidden";b.config.doc.documentElement.appendChild(l);return l;},_createGraphic:function(l){var m=b.config.doc.createElement("canvas");m.width=600;m.height=600;return m;},_2RGB:function(l){this._dummy.style.background=l;return this._dummy.style.backgroundColor;},_trackSize:function(l,m){if(l>this._width){this._width=l;}if(m>this._height){this._height=m;}},_trackPos:function(l,m){if(l>this._x){this._x=l;}if(m>this._y){this._y=m;}},_updateShapeProps:function(l,o){var m,n;if(!this._shape){this._shape={};}if(!this._shape.x){this._shape.x=l;}else{this._shape.x=Math.min(this._shape.x,l);}if(!this._shape.y){this._shape.y=o;}else{this._shape.y=Math.min(this._shape.y,o);}m=Math.abs(l-this._shape.x);if(!this._shape.w){this._shape.w=m;}else{this._shape.w=Math.max(m,this._shape.w);}n=Math.abs(o-this._shape.y);if(!this._shape.h){this._shape.h=n;}else{this._shape.h=Math.max(n,this._shape.h);}},getShape:function(l){l.graphic=this;return new b.Shape(l);}};b.CanvasDrawingUtil=k;b.CanvasGraphic=b.Base.create("graphic",b.CanvasDrawingUtil,[],{autoSize:true,_trackSize:function(l,m){if(l>this._width){this._width=l;}if(m>this._height){this._height=m;}this.setSize(l,m);},setPosition:function(l,m){this.node.style.left=l+"px";this.node.style.top=m+"px";},render:function(l){l=l||b.config.doc.body;this.node=document.createElement("div");this.node.style.width=l.offsetWidth+"px";this.node.style.height=l.offsetHeight+"px";this.node.style.display="block";this.node.style.position="absolute";this.node.style.left=l.getStyle("left");this.node.style.top=l.getStyle("top");this.node.style.pointerEvents="none";l.appendChild(this.node);this.node.appendChild(this._canvas);this._canvas.width=l.offsetWidth>0?l.offsetWidth:1;this._canvas.height=l.offsetHeight>0?l.offsetHeight:1;this._canvas.style.position="absolute";return this;},toggleVisible:function(l){this.node.style.visibility=l?"visible":"hidden";},_createGraphicNode:function(l){var m=b.config.doc.createElement("canvas");m.style.pointerEvents=l||"none";if(!this._graphicsList){this._graphicsList=[];}this._graphicsList.push(m);return m;},destroy:function(){this._removeChildren(this.node);if(this.node&&this.node.parentNode){this.node.parentNode.removeChild(this.node);}},_removeChildren:function(l){if(l.hasChildNodes()){var m;while(l.firstChild){m=l.firstChild;this._removeChildren(m);l.removeChild(m);}}},node:null});if(a=="canvas"){b.Graphic=b.CanvasGraphic;}var f=function(l){this.initializer.apply(this,arguments);};f.prototype={initializer:function(m){m=m||{};var l=m.width||0,n=m.height||0;this.node=this._createGraphics();this.setSize(l,n);this._initProps();},beginBitmapFill:function(l){var m={};m.src=l.bitmap.src;m.type="tile";this._fillProps=m;if(!isNaN(l.tx)||!isNaN(l.ty)||!isNaN(l.width)||!isNaN(l.height)){this._gradientBox={tx:l.tx,ty:l.ty,width:l.width,height:l.height};}else{this._gradientBox=null;}},beginFill:function(l,m){if(l){if(b.Lang.isNumber(m)){this._fillProps={type:"solid",opacity:m};}this._fillColor=l;this._fill=1;}return this;},beginGradientFill:function(n){var s=n.type,l=n.colors,m=n.alphas||[],q=n.ratios||[],v={colors:l,ratios:q},r=m.length,p=0,o,t,u=n.rotation||0;for(;p<r;++p){o=m[p];o=b.Lang.isNumber(o)?o:1;t=p>0?p+1:"";m[p]=Math.round(o*100)+"%";v["opacity"+t]=o;}if(s==="linear"){if(n){}if(u>0&&u<=90){u=450-u;}else{if(u<=270){u=270-u;}else{if(u<=360){u=630-u;}else{u=270;}}}v.type="gradientunscaled";v.angle=u;}else{if(s==="radial"){v.alignshape=false;v.type="gradientradial";v.focus="100%";v.focusposition="50%,50%";}}v.ratios=q||[];if(!isNaN(n.tx)||!isNaN(n.ty)||!isNaN(n.width)||!isNaN(n.height)){this._gradientBox={tx:n.tx,ty:n.ty,width:n.width,height:n.height};}else{this._gradientBox=null;}this._fillProps=v;},clear:function(){this._path="";this._removeChildren(this.node);},destroy:function(){this._removeChildren(this.node);this.node.parentNode.removeChild(this.node);},_removeChildren:function(l){if(l.hasChildNodes()){var m;while(l.firstChild){m=l.firstChild;this._removeChildren(m);l.removeChild(m);}}},toggleVisible:function(l){this._toggleVisible(this.node,l);},_toggleVisible:function(p,q){var o=b.one(p).get("children"),m=q?"visible":"hidden",n=0,l;if(o){l=o.length;for(;n<l;++n){this._toggleVisible(o[n],q);}}p.style.visibility=m;},curveTo:function(n,m,p,o,l,q){this._shape="shape";this._path+=" c "+Math.round(n)+", "+Math.round(m)+", "+Math.round(p)+", "+Math.round(o)+", "+l+", "+q;this._trackSize(l,q);},quadraticCurveTo:function(n,m,l,o){this._path+=" qb "+n+", "+m+", "+l+", "+o;},drawCircle:function(l,n,m){this._width=this._height=m*2;this._x=l-m;this._y=n-m;this._shape="oval";this._draw();},drawEllipse:function(l,o,m,n){this._width=m;this._height=n;this._x=l;this._y=o;this._shape="oval";this._draw();},drawRect:function(l,o,m,n){this._x=l;this._y=o;this._width=m;this._height=n;this.moveTo(l,o);
this.lineTo(l+m,o);this.lineTo(l+m,o+n);this.lineTo(l,o+n);this.lineTo(l,o);this._draw();},drawRoundRect:function(l,q,m,o,n,p){this._x=l;this._y=q;this._width=m;this._height=o;this.moveTo(l,q+p);this.lineTo(l,q+o-p);this.quadraticCurveTo(l,q+o,l+n,q+o);this.lineTo(l+m-n,q+o);this.quadraticCurveTo(l+m,q+o,l+m,q+o-p);this.lineTo(l+m,q+p);this.quadraticCurveTo(l+m,q,l+m-n,q);this.lineTo(l+n,q);this.quadraticCurveTo(l,q,l,q+p);this._draw();},drawWedge:function(n,q,p,o,m,l){this._drawingComplete=false;this._width=m;this._height=m;l=l||m;this._path+=this._getWedgePath({x:n,y:q,startAngle:p,arc:o,radius:m,yRadius:l});this._width=m*2;this._height=this._width;this._shape="shape";this._draw();},_getWedgePath:function(o){var n=o.x,s=o.y,q=o.startAngle,p=o.arc,m=o.radius,l=o.yRadius||m,r;if(Math.abs(p)>360){p=360;}q*=-65535;p*=65536;r=" m "+n+" "+s+" ae "+n+" "+s+" "+m+" "+l+" "+q+" "+p;return r;},end:function(){if(this._shape){this._draw();}this._initProps();},lineGradientStyle:function(){},lineStyle:function(o,n,s,q,p,r,l,m){this._stroke=1;this._strokeWeight=o*0.7;this._strokeColor=n;this._strokeOpacity=b.Lang.isNumber(s)?s:1;},lineTo:function(q,p,n){var m=arguments,o,l;if(typeof q==="string"||typeof q==="number"){m=[[q,p]];}l=m.length;this._shape="shape";this._path+=" l ";for(o=0;o<l;++o){this._path+=" "+Math.round(m[o][0])+", "+Math.round(m[o][1]);this._trackSize.apply(this,m[o]);}},moveTo:function(l,m){this._path+=" m "+Math.round(l)+", "+Math.round(m);},setSize:function(l,m){l=Math.round(l);m=Math.round(m);this.node.style.width=l+"px";this.node.style.height=m+"px";this.node.coordSize=l+" "+m;this._canvasWidth=l;this._canvasHeight=m;},setPosition:function(l,m){l=Math.round(l);m=Math.round(m);this.node.style.left=l+"px";this.node.style.top=m+"px";},render:function(l){var m=Math.max(l.offsetWidth||0,this._canvasWidth),n=Math.max(l.offsetHeight||0,this._canvasHeight);l=l||b.config.doc.body;l.appendChild(this.node);this.setSize(m,n);this._initProps();return this;},_shape:null,_trackSize:function(l,m){if(l>this._width){this._width=l;}if(m>this._height){this._height=m;}},_initProps:function(){this._fillColor=null;this._strokeColor=null;this._strokeOpacity=null;this._strokeWeight=0;this._fillProps=null;this._path="";this._width=0;this._height=0;this._x=0;this._y=0;this._fill=null;this._stroke=0;this._stroked=false;},_clearPath:function(){this._shape=null;this._path="";this._width=0;this._height=0;this._x=0;this._y=0;},_draw:function(){var n=this._createGraphicNode(this._shape),l=Math.round(this._width),o=Math.round(this._height),p,m=this._fillProps;this.setSize(l,o);if(this._path){if(this._fill||this._fillProps){this._path+=" x";}if(this._stroke){this._path+=" e";}n.path=this._path;n.coordSize=l+", "+o;}else{n.style.display="block";n.style.position="absolute";n.style.left=this._x+"px";n.style.top=this._y+"px";}if(this._fill){n.fillColor=this._fillColor;}else{n.filled=false;}if(this._stroke&&this._strokeWeight>0){n.strokeColor=this._strokeColor;n.strokeWeight=this._strokeWeight;if(b.Lang.isNumber(this._strokeOpacity)&&this._strokeOpacity<1){p=this._createGraphicNode("stroke");n.appendChild(p);p.opacity=this._strokeOpacity;}}else{n.stroked=false;}n.style.width=l+"px";n.style.height=o+"px";if(m){n.filled=true;n.appendChild(this._getFill());}this.node.appendChild(n);this._clearPath();},_getFill:function(){var z=this._createGraphicNode("fill"),x=this._width,r=this._height,s=this._fillProps,m,y,p=0,l,v="",t,q,u=Math.sqrt(Math.pow(x,2)+Math.pow(r,2)),o=50,n=50;if(this._gradientBox){o=Math.round((this._gradientBox.width/2-((this._x-this._gradientBox.tx)*u/x))/(x*x/u)*100);n=Math.round((this._gradientBox.height/2-((this._y-this._gradientBox.ty)*u/r))/(r*r/u)*100);s.focussize=(this._gradientBox.width/x)/10+" "+(this._gradientBox.height/r)/10;}if(s.colors){l=s.colors.concat();q=s.ratios.concat();t=l.length;for(;p<t;++p){y=q[p]||p/(t-1);y=Math.round(100*y)+"%";v+=", "+y+" "+l[p];}if(parseInt(y,10)<100){v+=", 100% "+l[t-1];}}for(m in s){if(s.hasOwnProperty(m)){z.setAttribute(m,s[m]);}}z.colors=v.substr(2);if(s.type==="gradientradial"){z.focusposition=o+"%,"+n+"%";}return z;},_createGraphics:function(){var l=this._createGraphicNode("group");l.style.display="inline-block";l.style.position="absolute";return l;},_createGraphicNode:function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsft.com:vml" class="vml'+l+'"/>');},_getNodeShapeType:function(m){var l="shape";if(this._typeConversionHash.hasOwnProperty(m)){l=this._typeConversionHash[m];}return l;},_typeConversionHash:{circle:"oval",ellipse:"oval",rect:"rect"},getShape:function(l){l.graphic=this;return new b.Shape(l);},addChild:function(l){this.node.appendChild(l);}};if(a=="vml"){var h=document.createStyleSheet();h.addRule(".vmlgroup","behavior:url(#default#VML)",h.rules.length);h.addRule(".vmlgroup","display:inline-block",h.rules.length);h.addRule(".vmlgroup","zoom:1",h.rules.length);h.addRule(".vmlshape","behavior:url(#default#VML)",h.rules.length);h.addRule(".vmlshape","display:inline-block",h.rules.length);h.addRule(".vmloval","behavior:url(#default#VML)",h.rules.length);h.addRule(".vmloval","display:inline-block",h.rules.length);h.addRule(".vmlrect","behavior:url(#default#VML)",h.rules.length);h.addRule(".vmlrect","display:block",h.rules.length);h.addRule(".vmlfill","behavior:url(#default#VML)",h.rules.length);h.addRule(".vmlstroke","behavior:url(#default#VML)",h.rules.length);b.Graphic=f;}function e(l){this._initialize(l);this._draw();}b.extend(e,b.Graphic,{type:"shape",autoSize:false,pointerEvents:"visiblePainted",_initialize:function(l){if(!l.graphic){l.graphic=new b.Graphic();}this._setProps(l);},_setProps:function(l){this.autoSize=l.autoSize||this.autoSize;this.pointerEvents=l.pointerEvents||this.pointerEvents;this.width=l.width||this.width;this.height=l.height||this.height;this.border=l.border||this.border;this.graphics=l.graphic||this.graphics;this.canvas=this.graphics;this.parentNode=this.graphics.node;this.fill=l.fill||this.fill;this.type=l.shape||this.type;
this.nodetype=this._getNodeShapeType(this.type);this.props=l.props||this.props;this.path=l.path||this.path;},_draw:function(){var m,s,p,o,l=this.parentNode,q=0,n=this.width||0,r=this.height||0;if(!this.node){this.node=this._createGraphicNode(this.nodetype,this.pointerEvents);l.appendChild(this.node);}if(this.type=="wedge"){this.path=this._getWedgePath(this.props);}if(this.nodetype=="path"){this._setPath();}if(this.border&&this.border.weight&&this.border.weight>0){q=this.border.weight;n-=q*2;r-=q*2;}this._addBorder();if(this.nodetype==="ellipse"){p=this.width/2;m=this.width/2;o=this.height/2;s=this.height/2;p-=q;o-=q;this.node.setAttribute("cx",m);this.node.setAttribute("cy",s);this.node.setAttribute("rx",p);this.node.setAttribute("ry",o);}else{this.node.setAttribute("width",n);this.node.setAttribute("height",r);this.node.style.width=n+"px";this.node.style.height=r+"px";}this._addFill();l.style.width=this.width+"px";l.style.height=this.height+"px";l.setAttribute("width",this.width);l.setAttribute("height",this.height);this.node.style.visibility="visible";this.node.setAttribute("x",q);this.node.setAttribute("y",q);return this;},_setPath:function(){if(this.path){this.path+=" Z";this.node.setAttribute("d",this.path);}},_addBorder:function(){if(this.border&&this.border.weight&&this.border.weight>0){var l=this.border.alpha;this.border.color=this.border.color||"#000000";this.border.weight=this.border.weight||1;this.border.alpha=b.Lang.isNumber(l)?l:1;this.border.linecap=this.border.linecap||"square";this.node.setAttribute("stroke",this.border.color);this.node.setAttribute("stroke-linecap",this.border.linecap);this.node.setAttribute("stroke-width",this.border.weight);this.node.setAttribute("stroke-opacity",this.border.alpha);}else{this.node.setAttribute("stroke","none");}},_addFill:function(){var l;if(this.fill.type==="linear"||this.fill.type==="radial"){this.beginGradientFill(this.fill);this.node.appendChild(this._getFill());}else{if(this.fill.type==="bitmap"){this.beginBitmapFill(this.fill);this.node.appendChild(this._getFill());}else{if(!this.fill.color){this.node.setAttribute("fill","none");}else{l=this.fill.alpha;this.fill.alpha=b.Lang.isNumber(l)?l:1;this.node.setAttribute("fill",this.fill.color);this.node.setAttribute("fill-opacity",l);}}}},end:function(){this._setPath();},update:function(l){this._setProps(l);this._draw();return this;},_getNodeShapeType:function(l){if(this._typeConversionHash.hasOwnProperty(l)){l=this._typeConversionHash[l];}return l;},toggleVisible:function(m){var l=m?"visible":"hidden";if(this.node){this.node.style.visibility=l;}},addClass:function(l){var m=this.node;if(m){if(m.className&&m.className.baseVal){m.className.baseVal=b.Lang.trim([m.className.baseVal,l].join(" "));}else{m.setAttribute("class",l);}}},setPosition:function(l,o){var m=b.one(this.parentNode),n=this.hotspot;m.setStyle("position","absolute");m.setStyle("left",l);m.setStyle("top",o);if(n){n.setStyle("position","absolute");n.setStyle("left",l);n.setStyle("top",o);}},_typeConversionHash:{circle:"ellipse",wedge:"path"}});b.Shape=e;function i(l){this._dummy=this._createDummy();this._canvas=this._createGraphic();this.node=this._canvas;this._context=this._canvas.getContext("2d");this._initialize(l);this._validate();}b.extend(i,b.CanvasDrawingUtil,{type:"shape",autoSize:false,_initialize:function(l){this._canvas.style.position="absolute";if(l.graphic){l.graphic.node.appendChild(this._canvas);}this._setProps(l);},_setProps:function(l){this.autoSize=l.autoSize||this.autoSize;this.width=l.width||this.width;this.height=l.height||this.height;this.border=l.border||this.border;this.graphics=l.graphic||this.graphics;this.fill=l.fill||this.fill;this.type=l.shape||this.type;this.props=l.props||this.props;this.path=l.path||this.path;this.props=l.props||this.props;this.parentNode=this.graphics.node;},_validate:function(){var l=this.width,o=this.height,m=this.border,n=this.type,p=this.fill;this.clear();this.setSize(this.width,this.height);this._canvas.width=this.width;this._canvas.height=this.height;this._canvas.style.top="0px";this._canvas.style.left="0px";this._canvas.style.width=this.width+"px";this._canvas.style.height=this.height+"px";if(m&&m.weight&&m.weight>0){m.color=m.color||"#000";m.alpha=m.alpha||1;this.lineStyle(m.weight,m.color,m.alpha);}if(p.type==="radial"||p.type==="linear"){this.beginGradientFill(p);}else{if(p.type==="bitmap"){this.beginBitmapFill(p);}else{this.beginFill(p.color,p.alpha);}}switch(n){case"circle":this.drawEllipse(0,0,l,o);break;case"rect":this.drawRect(0,0,l,o);break;case"wedge":this.drawWedge(this.props);break;}return this;},update:function(l){this._setProps(l);this._validate();return this;},toggleVisible:function(m){var l=m?"visible":"hidden";if(this.node){this.node.style.visibility=l;}},setPosition:function(l,n){var m=b.one(this.parentNode);m.setStyle("position","absolute");m.setStyle("left",l);m.setStyle("top",n);},addClass:function(l){if(this.node){this.node.style.pointerEvents="painted";this.node.setAttribute("class",l);}}});b.CanvasShape=i;if(a=="canvas"){b.Shape=b.CanvasShape;}function j(l){this._initialize(l);this._draw();}j.prototype={type:"shape",_initialize:function(l){if(!l.graphic){l.graphic=new b.Graphic();}this._setProps(l);},width:0,height:0,_setProps:function(l){this.width=l.width&&l.width>=0?l.width:this.width;this.height=l.height&&l.height>=0?l.height:this.height;this.border=l.border||this.border;this.graphics=l.graphic||this.graphics;this.canvas=this.graphics;this.parentNode=this.graphics.node;this.fill=l.fill||this.fill;this.type=l.shape||this.type;this.props=l.props||this.props;},_draw:function(){var m,n=0,l=this.width||0,o=this.height||0;this.graphics.setSize(l,o);if(this.node){this.node.style.visible="hidden";}else{if(!this.node){this.node=this.graphics._createGraphicNode(this.graphics._getNodeShapeType(this.type));this.graphics.node.appendChild(this.node);}}if(this.type==="wedge"){m=this.graphics._getWedgePath(this.props);if(this.fill){m+=" x";}if(this.border){m+=" e";
}this.node.path=m;}this._addBorder();if(this.border&&this.border.weight&&this.border.weight>0){n=this.border.weight;l-=n;o-=n;}this.node.style.width=Math.max(l,0)+"px";this.node.style.height=Math.max(o,0)+"px";this._addFill();return this;},_addBorder:function(){if(this.border&&this.border.weight&&this.border.weight>0){var l=this.border.alpha,m=this.borderWeight;l=b.Lang.isNumber(l)?l:1;m=b.Lang.isNumber(m)?m:1;this.node.strokecolor=this.border.color||"#000000";this.node.strokeweight=m;if(l<1){if(!this._strokeNode){this._strokeNode=this.graphics._createGraphicNode("stroke");this.node.appendChild(this._strokeNode);}this._strokeNode.opacity=l;}else{if(this._strokeNode){this._strokeNode.opacity=l;}}this.node.stroked=true;}else{this.node.stroked=false;}},_addFill:function(){var l;this.node.filled=true;if(this.fill.type==="linear"||this.fill.type==="radial"){this.graphics.beginGradientFill(this.fill);this.node.appendChild(this.graphics._getFill());}else{if(this.fill.type==="bitmap"){this.graphics.beginBitmapFill(this.fill);this.node.appendChild(this.graphics._getFill());}else{if(!this.fill.color){this.node.filled=false;}else{if(this.fillnode){this.graphics._removeChildren(this.fillnode);}l=this.fill.alpha;l=b.Lang.isNumber(l)?l:1;this.fill.alpha=l;this.fillnode=this.graphics._createGraphicNode("fill");this.fillnode.type="solid";this.fillnode.color=this.fill.color;this.fillnode.opacity=l;this.node.appendChild(this.fillnode);}}}},addClass:function(m){var l=this.node;if(l){b.one(l).addClass(m);}},toggleVisible:function(m){var l=m?"visible":"hidden";if(this.node){b.one(this.node).setStyle("visibility",l);}},setPosition:function(l,n){var m=b.one(this.parentNode);m.setStyle("position","absolute");m.setStyle("left",l);m.setStyle("top",n);},update:function(l){this._setProps(l);this._draw();return this;}};b.VMLShape=j;if(a=="vml"){b.Shape=j;}},"@VERSION@",{requires:["dom","event-custom","event-mouseenter","widget","widget-position","widget-stack"]});