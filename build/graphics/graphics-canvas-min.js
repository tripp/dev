YUI.add("graphics-canvas",function(E){function D(F){this.initializer.apply(this,arguments);}D.prototype={autoSize:true,initializer:function(G){G=G||{};var F=G.width||0,H=G.height||0;this.node=E.config.doc.createElement("div");this.setSize(F,H);if(G.render){this.render(G.render);}},setSize:function(F,G){if(this.autoSize){if(F>this.node.getAttribute("width")){this.node.style.width=F+"px";this.node.setAttribute("width",F);}if(G>this.node.getAttribute("height")){this.node.style.height=G+"px";this.node.setAttribute("height",G);}}},_trackSize:function(F,G){if(F>this._width){this._width=F;}if(G>this._height){this._height=G;}this.setSize(F,G);},setPosition:function(F,G){this.node.style.left=F+"px";this.node.style.top=G+"px";},render:function(I){var J=this.node,F=E.one(I),G=F.get("width")||F.get("offsetWidth"),H=F.get("height")||F.get("offsetHeight");J.style.display="block";J.style.position="absolute";J.style.left=E.one(J).getStyle("left");J.style.top=E.one(J).getStyle("top");J.style.pointerEvents="visiblePainted";F=F||E.config.doc.body;F.appendChild(this.node);this.setSize(G,H);return this;},toggleVisible:function(F){this.node.style.visibility=F?"visible":"hidden";},addShape:function(F){var G=F.get("node");this.node.appendChild(G);if(!this._graphicsList){this._graphicsList=[];}this._graphicsList.push(G);},destroy:function(){this._removeChildren(this.node);if(this.node&&this.node.parentNode){this.node.parentNode.removeChild(this.node);}},_removeChildren:function(F){if(F.hasChildNodes()){var G;while(F.firstChild){G=F.firstChild;this._removeChildren(G);F.removeChild(G);}}}};E.Graphic=D;var B;function C(){if(!B){B=E.config.doc.createElement("div");}B.style.height=0;B.style.width=0;B.style.overflow="hidden";E.config.doc.documentElement.appendChild(B);return B;}function A(){}A.prototype={_reHex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,_2RGBA:function(G,F){F=(F!==undefined)?F:1;if(this._reHex.exec(G)){G="rgba("+[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)].join(",")+","+F+")";}return G;},_2RGB:function(G){var F=C();F.style.background=G;return F.style.backgroundColor;},setSize:function(F,G){if(this.get("autoSize")){if(F>this.node.getAttribute("width")){this.node.style.width=F+"px";this.node.setAttribute("width",F);}if(G>this.node.getAttribute("height")){this.node.style.height=G+"px";this.node.setAttribute("height",G);}}},_updatePosition:function(F,G){this._updateCoords(F,G);if(F<=this._left){this._left=F;}else{if(F>=this._right){this._right=F;}}if(G<=this._top){this._top=G;}else{if(G>=this._bottom){this._bottom=G;}}this._width=this._right-this._left;this._height=this._bottom-this._top;},_updateCoords:function(F,G){this._xcoords.push(F);this._ycoords.push(G);},_clearAndUpdateCoords:function(){var F=this._xcoords.pop()||0,G=this._ycoords.pop()||0;this._updateCoords(F,G);},_updateNodePosition:function(){var G=this.get("node"),F=this.get("x"),H=this.get("y");G.style.position="absolute";G.style.left=(F+this._left)+"px";G.style.top=(H+this._top)+"px";},_methods:null,_properties:null,_updateDrawingQueue:function(F){if(!this._methods){this._methods=[];}this._methods.push(F);},lineTo:function(K,J,H){var G=arguments,I,F;if(!this._lineToMethods){this._lineToMethods=[];}if(typeof K==="string"||typeof K==="number"){G=[[K,J]];}for(I=0,F=G.length;I<F;++I){this._updateDrawingQueue(["lineTo",G[I][0],G[I][1]]);this._lineToMethods[this._lineToMethods.length]=this._methods[this._methods.length-1];this._updateShapeProps.apply(this,G[I]);this._updatePosition(G[I][0],G[I][1]);}this._drawingComplete=false;return this;},moveTo:function(F,G){this._updateDrawingQueue(["moveTo",F,G]);this._updateShapeProps(F,G);this._updatePosition(F,G);this._drawingComplete=false;return this;},clear:function(){var F=this.node;this._initProps();F.setAttribute("width",F.getAttribute("width"));F.setAttribute("height",F.getAttribute("height"));return this;},curveTo:function(H,G,J,I,F,K){this._updateDrawingQueue(["bezierCurveTo",H,G,J,I,F,K]);this._drawingComplete=false;this._updateShapeProps(F,K);return this;},quadraticCurveTo:function(H,G,F,I){this._updateDrawingQueue(["quadraticCurveTo",H,G,F,I]);this._drawingComplete=false;this._updateShapeProps(F,I);return this;},drawCircle:function(G,K,F){var I=0,H=2*Math.PI,J=F*2;this._shape={x:G,y:K,w:J,h:J};this._drawingComplete=false;this._updatePosition(G+J,K+J);this._updateDrawingQueue(["arc",G+F,K+F,F,I,H,false]);return this;},drawEllipse:function(P,N,Q,V){this._shape={x:P,y:N,w:Q,h:V};if(this._stroke&&this._strokeWeight>0){Q-=this._strokeWeight*2;V-=this._strokeWeight*2;P+=this._strokeWeight;N+=this._strokeWeight;}var S=8,K=-(45/180)*Math.PI,X=0,J,H=Q/2,I=V/2,T=0,M=P+H,L=N+I,R,O,W,U,G,F;R=M+Math.cos(0)*H;O=L+Math.sin(0)*I;this.moveTo(R,O);for(;T<S;T++){X+=K;J=X-(K/2);W=M+Math.cos(X)*H;U=L+Math.sin(X)*I;G=M+Math.cos(J)*(H/Math.cos(K/2));F=L+Math.sin(J)*(I/Math.cos(K/2));this.quadraticCurveTo(G,F,W,U);}this._trackPos(P,N);this._trackSize(P+Q,N+V);return this;},drawRect:function(F,I,G,H){this._shape={x:F,y:I,w:G,h:H};this._drawingComplete=false;this.moveTo(F,I);this.lineTo(F+G,I);this.lineTo(F+G,I+H);this.lineTo(F,I+H);this.lineTo(F,I);return this;},drawRoundRect:function(F,K,G,I,H,J){this._shape={x:F,y:K,w:G,h:I};this._drawingComplete=false;this._updateDrawingQueue(["moveTo",F,K+J]);this._updateDrawingQueue(["lineTo",F,K+I-J]);this._updateDrawingQueue(["quadraticCurveTo",F,K+I,F+H,K+I]);this._updateDrawingQueue(["lineTo",F+G-H,K+I]);this._updateDrawingQueue(["quadraticCurveTo",F+G,K+I,F+G,K+I-J]);this._updateDrawingQueue(["lineTo",F+G,K+J]);this._updateDrawingQueue(["quadraticCurveTo",F+G,K,F+G-H,K]);this._updateDrawingQueue(["lineTo",F+H,K]);this._updateDrawingQueue(["quadraticCurveTo",F,K,F,K+J]);this._trackPos(F,K);this._trackSize(G,I);this._paint();return this;},drawWedge:function(I){var P=I.x,N=I.y,T=I.startAngle,M=I.arc,H=I.radius,J=I.yRadius,S,R,L,X,K,Q,O,W,V,G,F,U=0;this._drawingComplete=false;this._updateRenderQueue(["moveTo",P,N]);J=J||H;if(Math.abs(M)>360){M=360;}S=Math.ceil(Math.abs(M)/45);
R=M/S;L=-(R/180)*Math.PI;X=-(T/180)*Math.PI;if(S>0){Q=P+Math.cos(T/180*Math.PI)*H;O=N+Math.sin(-T/180*Math.PI)*J;this.lineTo(Q,O);for(;U<S;++U){X+=L;K=X-(L/2);W=P+Math.cos(X)*H;V=N+Math.sin(X)*J;G=P+Math.cos(K)*(H/Math.cos(L/2));F=N+Math.sin(K)*(J/Math.cos(L/2));this._updateRenderQueue(["quadraticCurveTo",G,F,W,V]);}this._updateRenderQueue(["lineTo",P,N]);}this._trackPos(P,N);this._trackSize(H,H);this._paint();},end:function(){this._paint();this._initProps();return this;},_initProps:function(){var F=this._context;F.fillStyle="rgba(0, 0, 0, 1)";F.lineWidth=6;F.lineJoin="miter";F.miterLimit=3;this._strokeStyle="rgba(0, 0, 0, 1)";this._methods=[];this._width=0;this._height=0;this._left=0;this._top=0;this._right=0;this._bottom=0;this._x=0;this._y=0;this._fillType=null;this._stroke=null;this._bitmapFill=null;this._drawingComplete=false;},_drawingComplete:false,_createGraphic:function(F){var G=E.config.doc.createElement("canvas");return G;},_trackSize:function(F,G){if(F>this._width){this._width=F;}if(G>this._height){this._height=G;}},_trackPos:function(F,G){if(F>this._x){this._x=F;}if(G>this._y){this._y=G;}},_updateShapeProps:function(F,I){var G,H;if(!this._shape){this._shape={};}if(!this._shape.x){this._shape.x=F;}else{this._shape.x=Math.min(this._shape.x,F);}if(!this._shape.y){this._shape.y=I;}else{this._shape.y=Math.min(this._shape.y,I);}G=Math.abs(F-this._shape.x);if(!this._shape.w){this._shape.w=G;}else{this._shape.w=Math.max(G,this._shape.w);}H=Math.abs(I-this._shape.y);if(!this._shape.h){this._shape.h=H;}else{this._shape.h=Math.max(H,this._shape.h);}}};E.Drawing=A;E.Shape=E.Base.create("shape",E.Base,[E.Drawing],{_left:0,_right:0,_top:0,_bottom:0,initializer:function(){this._xcoords=[0];this._ycoords=[0];this.get("stroke");this.get("fill");this._addListeners();var F=this.get("node");F.setAttribute("width",this.get("width"));F.setAttribute("height",this.get("height"));this._draw();},_getNode:function(){var F=E.config.doc.createElement("canvas");this._context=F.getContext("2d");return F;},_addListeners:function(){this.after("strokeChange",this._updateHandler);this.after("fillChange",this._updateHandler);this.after("widthChange",this._updateHandler);this.after("heightChange",this._updateHandler);},_setStrokeProps:function(J){var G=J.color,H=J.weight,I=J.alpha,F=J.dashstyle;this._dashstyle=(F&&E.Lang.isArray(F)&&F.length>1)?F:null;this._strokeWeight=H;if(H){this._stroke=1;}else{this._stroke=0;}if(I){this._strokeStyle=this._2RGBA(G,I);}else{this._strokeStyle=G;}},_setFillProps:function(H){var F=H.color,G=H.alpha;if(G){F=this._2RGBA(F,G);}else{F=this._2RGB(F);}this._fillColor=F;this._fillType="solid";},translate:function(F,H){var G=this._context;G.save();G.translate(F,H);G.restore();},skewX:function(F){},skewY:function(F){},rotate:function(G,H){var F=this.get("node");F.style.MozTransformOrigin="0 0";F.style.MozTransform="rotate("+G+"deg)";F.style.webkitTransformOrigin="0 0";F.style.webkitTransform="rotate("+G+"deg)";F.style.msTransformOrigin="0 0";F.style.msTransform="rotate("+G+"deg)";F.style.OTransformOrigin="0 0";F.style.OTransform="rotate("+G+"deg)";},scale:function(F){},matrix:function(G,F,K,J,I,H){},_updateHandler:function(F){this._draw();},_draw:function(){this._paint();},_paint:function(){if(!this._methods){return;}var H=this.get("node"),O=this.get("width")||this._width,K=this.get("height")||this._height,G=this._context,I=this._methods,J=0,N=this._lineToMethods,P=N?N.length:0,F,M,L=I?I.length:0;H.setAttribute("width",O);H.setAttribute("height",K);if(!L||L<1){return;}for(;J<P;++J){M=N[J];M[1]=M[1]-this._left;M[2]=M[2]-this._top;}G.beginPath();for(J=0;J<L;++J){M=I[J];if(M&&M.length>0){F=M.shift();if(F){if(F&&F=="lineTo"&&this._dashstyle){M.unshift(this._xcoords[J]-this._left,this._ycoords[J]-this._top);this._drawDashedLine.apply(this,M);}else{G[F].apply(G,M);}}}}if(this._fillType){G.fillStyle=this._fillColor;G.closePath();}if(this._fillType){G.fill();}if(this._stroke){if(this._strokeWeight){G.lineWidth=this._strokeWeight;}G.strokeStyle=this._strokeStyle;G.stroke();}this._drawingComplete=true;this._clearAndUpdateCoords();this._updateNodePosition();},_drawDashedLine:function(O,U,F,R){var G=this._context,S=this._dashstyle[0],Q=this._dashstyle[1],I=S+Q,L=F-O,P=R-U,T=Math.sqrt(Math.pow(L,2)+Math.pow(P,2)),J=Math.floor(Math.abs(T/I)),H=Math.atan2(P,L),N=O,M=U,K;L=Math.cos(H)*I;P=Math.sin(H)*I;for(K=0;K<J;++K){G.moveTo(N,M);G.lineTo(N+Math.cos(H)*S,M+Math.sin(H)*S);N+=L;M+=P;}G.moveTo(N,M);T=Math.sqrt((F-N)*(F-N)+(R-M)*(R-M));if(T>S){G.lineTo(N+Math.cos(H)*S,M+Math.sin(H)*S);}else{if(T>0){G.lineTo(N+Math.cos(H)*T,M+Math.sin(H)*T);}}G.moveTo(F,R);}},{ATTRS:{node:{readOnly:true,valueFn:"_getNode"},width:{},height:{},x:{value:0,setter:function(G){var F=this.get("node");F.style.left=(G+this._left)+"px";return G;}},y:{value:0,setter:function(G){var F=this.get("node");F.style.top=(G+this._top)+"px";return G;}},visible:{value:true,setter:function(G){var F=G?"visible":"hidden";this.get("node").style.visibility=F;return G;}},fill:{setter:function(G){var F=this.get("fill")||this._getAttrCfg("fill").defaultValue;G=(G)?E.merge(F,G):null;this._setFillProps(G);return G;}},stroke:{valueFn:function(){return{weight:1,dashstyle:null,color:"#000",alpha:1};},setter:function(G){var F=this.get("stroke")||this._getAttrCfg("stroke").defaultValue;G=(G)?E.merge(F,G):null;this._setStrokeProps(G);return G;}},autoSize:{value:false},pointerEvents:{value:"visiblePainted"}}});E.Path=E.Base.create("path",E.Shape,[],{_type:"path",_addListeners:function(){},end:function(){this._draw();}},{ATTRS:{width:{getter:function(){return this._width;},setter:function(F){this._width=F;return F;}},height:{getter:function(){return this._height;},setter:function(F){this._height=F;return F;}},path:{getter:function(){return this._path;},setter:function(F){this._path=F;return F;}}}});E.Rect=E.Base.create("rect",E.Shape,[],{_type:"rect",_draw:function(){var F=this.get("x"),K=this.get("y"),G=this.get("width"),H=this.get("height"),J=this.get("fill"),I=this.get("stroke");
this.drawRect(F,K,G,H);this._paint();}});E.Ellipse=E.Base.create("ellipse",E.Shape,[],{_type:"ellipse",_draw:function(){var F=this.get("width"),G=this.get("height"),I=this.get("fill"),H=this.get("stroke");this.drawEllipse(0,0,F,G);this._paint();}});E.Circle=E.Base.create("circle",E.Base,[E.Shape],{_type:"circle",_draw:function(){var F=this.get("radius"),H=this.get("fill"),G=this.get("stroke");if(F){this.drawCircle(0,0,F);this._paint();}},_addListeners:function(){this.after("radiusChange",this._updateHandler);E.Shape.prototype._addListeners.apply(this,arguments);}},{ATTRS:{width:{readOnly:true,getter:function(){return this.get("radius")*2;}},height:{readOnly:true,getter:function(){return this.get("radius")*2;}},radius:{lazyAdd:false,setter:function(H){var F=this.get("node"),G=H*2;F.setAttribute("width",G);F.setAttribute("height",G);return H;}}}});},"@VERSION@",{requires:["graphics"],skinnable:false});